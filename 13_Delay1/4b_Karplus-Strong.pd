#N canvas 75 38 1369 842 12;
#X obj 405 296 noise~;
#X obj 448 5 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 463 297 vline~;
#X floatatom 505 39 5 0 0 0 - metro - 0;
#X floatatom 618 294 5 0 0 0 MIDI_NOTE - - 0;
#X floatatom 688 370 20 -0.999 0.999 2 FB - - 0;
#X floatatom 711 412 5 100 20000 2 LOP\ cutoff lop - 0;
#X obj 688 327 / 100;
#X obj 692 292 hsl 162 19 -99.99 99.99 0 0 empty feedback FEEDBACK -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-array1 441 float 3;
#A 0 -0.0767895 -0.0876254 -0.0960898 -0.101603 -0.103887 -0.102995 -0.0993006 -0.0934216 -0.0861217 -0.0781974 -0.0703764 -0.063244 -0.0572036 -0.0524711 -0.0490957 -0.0469945 -0.0459928 -0.0458611 -0.0463478 -0.0472043 -0.0482048 -0.0491603 -0.0499298 -0.050427 -0.0506262 -0.0505645 -0.05034 -0.0501021 -0.0500311 -0.0503054 -0.0510578 -0.0523265 -0.054011 -0.0558446 -0.057397 -0.0581125 -0.0573861 -0.0546658 -0.049561 -0.041932 -0.0319333 -0.0199958 -0.00674731 0.00710895 0.0209231 0.0341957 0.0466126 0.0580129 0.0683066 0.0773809 0.0850336 0.0909618 0.0948073 0.0962391 0.0950412 0.091177 0.0848138 0.0763082 0.0661648 0.0549807 0.0433886 0.0319979 0.0213363 0.011792 0.00356572 -0.00335395 -0.00917571 -0.0142459 -0.0189501 -0.0235996 -0.0283346 -0.033074 -0.0375313 -0.0412898 -0.0439163 -0.0450778 -0.0446249 -0.0426198 -0.039301 -0.0349981 -0.0300242 -0.0245787 -0.0186929 -0.0122387 -0.00499982 0.00321329 0.0124416 0.022487 0.0328834 0.0429367 0.0518209 0.0587028 0.0628641 0.0638 0.0612862 0.0554147 0.046604 0.035581 0.0233304 0.0110072 -0.000189935 -0.00916779 -0.0150891 -0.0174936 -0.0163644 -0.0121238 -0.00555966 0.00230369 0.0103636 0.0175955 0.0231809 0.0265889 0.0276065 0.0263273 0.0231112 0.0185317 0.0133199 0.00830545 0.0043525 0.00228467 0.00280068 0.00638602 0.0132316 0.0231716 0.0356524 0.0497417 0.0641873 0.077528 0.0599306 0.0598234 0.0569011 0.0521685 0.0465455 0.0406544 0.0347242 0.0286113 0.021909 0.0141073 0.0047612 -0.00636499 -0.0192009 -0.0333335 -0.0480362 -0.0623571 -0.0752548 -0.0857584 -0.0931223 -0.0969425 -0.0972135 -0.0943131 -0.088924 -0.0819112 -0.0741849 -0.0665747 -0.0597393 -0.0541207 -0.0499422 -0.0472378 -0.0458992 -0.0457241 -0.0464583 -0.0478291 -0.0495702 -0.0514404 -0.0532379 -0.0548097 -0.0560589 -0.0569498 -0.057513 -0.0578462 -0.0581106 -0.0585141 -0.0592806 -0.0606025 -0.062583 -0.0651768 -0.0681457 -0.0710451 -0.0732527 -0.0740472 -0.0727264 -0.0687443 -0.0618357 -0.0520921 -0.0399628 -0.0261708 -0.011562 0.00307035 0.017131 0.0302886 0.0424418 0.0536041 0.0637587 0.0727445 0.0802211 0.0857234 0.0887784 0.0890356 0.0863642 0.0808899 0.0729732 0.0631508 0.0520655 0.0404019 0.0288303 0.01795 0.00822737 -6.78114e-05 -0.00690958 -0.0125221 -0.017327 -0.0218308 -0.026478 -0.0315104 -0.0368814 -0.0422547 -0.0470927 -0.0508049 -0.0529103 -0.0531618 -0.0515971 -0.048505 -0.0443189 -0.0394725 -0.0342604 -0.028748 -0.0227605 -0.015961 -0.00799771 0.00132507 0.0119078 0.0232954 0.0347154 0.0451981 0.0537392 0.0594565 0.0617096 0.0601706 0.0548577 0.0461437 0.034746 0.0216915 0.00823834 -0.00425196 -0.0144848 -0.0214179 -0.0244227 -0.0233838 -0.0187125 -0.0112715 -0.0022264 0.00714383 0.0156395 0.0222988 0.0264967 0.0279789 0.0268384 0.0234595 0.0184527 0.0125938 0.00677075 0.00192757 -0.00100537 -0.00119968 0.00197032 0.00882841 0.0193156 0.0329415 0.0487783 0.0655058 0.0815149 0.0950719 0.104536 0.108604 0.10654 0.0983356 0.0847561 0.067241 0.0476741 0.0280678 0.0102409 -0.00443073 -0.0151345 -0.021601 -0.0239793 -0.022674 -0.0182065 -0.0111404 -0.00206899 0.00836297 0.0194396 0.0303801 0.0403719 0.0486203 0.0543999 0.0571061 0.056316 0.0518653 0.04394 0.0331556 0.0205878 0.00771119 -0.00377109 -0.0121976 -0.0162643 -0.0153097 -0.00948512 0.000245451 0.0122927 0.0247705 0.0358824 0.0442626 0.0491847 0.0505984 0.0490027 0.0452126 0.0400947 0.0343424 0.0283403 0.0221306 0.0154739 0.00797163 -0.000784247 -0.0110685 -0.0229133 -0.0360493 -0.0499069 -0.0636756 -0.0764122 -0.0871812 -0.0951996 -0.09996 -0.101305 -0.0994424 -0.094896 -0.0884116 -0.0808355 -0.0729934 -0.0655913 -0.0591532 -0.0539988 -0.0502554 -0.0478917 -0.046761 -0.0466443 -0.047286 -0.0484235 -0.0498092 -0.0512271 -0.0525049 -0.0535226 -0.0542186 -0.0545945 -0.0547172 -0.0547156 -0.0547681 -0.0550774 -0.0558315 -0.0571523 -0.0590424 -0.0613394 -0.0636944 -0.0655855 -0.0663747 -0.0654039 -0.0621141 -0.0561642 -0.0475157 -0.0364592 -0.0235668 -0.00957926 0.00474297 0.0187602 0.0320401 0.0443648 0.0556599 0.0658815 0.0749074 0.0824807 0.0882257 0.0917258 0.0926311 0.0907553 0.0861315 0.0790164 0.0698556 0.0592257 0.0477732 0.0361548 0.0249799 0.0147509 0.00580285 -0.00174366 -0.0079998 -0.0132772 -0.0180046 -0.0226059 -0.027372 -0.0323653 -0.03739 -0.0420387 -0.0458033 -0.0482142 -0.0489647 -0.047984 -0.0454379 -0.0416615 -0.0370439 -0.0319024 -0.0263848 -0.0204321 -0.0138174 -0.006253 0.00246626 0.0123289 0.023026 0.0339496 0.0442702 0.0530653 0.0594638 0.062771 0.0625572 0.0587098 0.051455 0.0413571 0.0292904 0.0163763 0.00387656 -0.00695306 -0.0150304 -0.0196043 -0.0203687 -0.0175066 -0.0116538 -0.00378881 0.00492647 0.0133246 0.0203935 0.0253942 0.0279212 0.027908;
#X coords 0 1 441 -1 200 140 1 0 0;
#X restore 1026 488 graph;
#X obj 828 462 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 828 483 metro 10;
#X obj 631 216 spigot;
#X obj 677 187 tgl 19 0 empty randomnote empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 448 78 metro 500;
#X text 854 36 Der Karplus-Strong-Algorithmus ist ein Verfahren der Klangsynthese \, welches besonders geeignet ist \, um den Klang von Saiteninstrumenten zu simulieren. Der Algorithmus wurde 1983 im Computer Music Journal von Kevin Karplus und Alex Strong vorgestellt.;
#X obj 448 102 t b b;
#N canvas 256 51 1256 681 karplus 0;
#X obj 332 130 expr 1000 / $f1;
#X floatatom 332 164 5 0 0 0 - - - 0;
#X obj 380 477 *~ 0;
#X floatatom 404 438 5 -0.999 0.999 0 - - - 0;
#X floatatom 534 493 5 0 0 0 - - - 0;
#X floatatom 332 76 5 0 0 0 - - - 0;
#X obj 332 106 mtof;
#X obj 331 43 inlet;
#X obj 183 262 inlet~;
#X obj 229 209 outlet~;
#X obj 406 413 inlet;
#X obj 534 467 inlet;
#X obj 354 502 +~;
#X text 452 414 feedback;
#X text 589 473 lowpass cutoff;
#X text 128 263 source;
#X text 376 44 source;
#X obj 329 300 *~ 0.5;
#X obj 452 298 *~ 0.5;
#X obj 330 340 +~;
#X obj 332 188 delread4~ \$0-kp1 10;
#X obj 361 613 delwrite~ \$0-kp1 1000;
#X text 37 491 die blocksize muss gering sein!;
#X text 642 234 hier wird der Input um 1 Sample verzögert;
#X text 641 255 das Original-Signal wird mit dem Verzögerten verglichen und ein Mittelwert erstellt.;
#X text 643 285 Dies soll das Ausschwingen der Saite imitieren.;
#X text 434 529 ein Lowpass zur weiteren Dämpfung / Timbre;
#X obj 354 526 lop~ 10000;
#X obj 354 550 hip~ 50;
#X obj 329 218 s~ sig;
#X obj 325 265 r~ sig;
#X obj 38 516 block~ 1 1 1;
#X connect 0 0 1 0;
#X connect 1 0 20 0;
#X connect 2 0 12 1;
#X connect 3 0 2 1;
#X connect 4 0 27 1;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 7 0 5 0;
#X connect 8 0 12 0;
#X connect 10 0 3 0;
#X connect 11 0 4 0;
#X connect 12 0 27 0;
#X connect 17 0 19 0;
#X connect 18 0 19 1;
#X connect 19 0 2 0;
#X connect 20 0 9 0;
#X connect 20 0 29 0;
#X connect 20 0 18 0;
#X connect 27 0 28 0;
#X connect 28 0 21 0;
#X connect 30 0 17 0;
#X restore 596 439 pd karplus;
#X text 705 187 random note on/off;
#X text 854 113 Der Algorithmus basiert auf einem Kreislauf \, in dem Geräuschsamples zirkulieren und dabei einen Filter durchlaufen. In diesen Kreislauf wird initial ein zufälliges Geräusch eingespeist \, welches in jedem Durchlauf einmal vom Filter modifiziert und ausgegeben wird. Der Algorithmus gehört zu den sogenannten waveguiding-Verfahren.;
#X obj 594 507 *~;
#X obj 406 494 hsl 162 19 0 1 0 0 empty empty empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 403 542 line~;
#X obj 594 558 dac~ 1 2;
#X obj 436 327 *~;
#X obj 829 508 tabwrite~ \$0-array1;
#X text 286 411 etwas abschwächen...;
#X text 299 296 Quelle: Noise;
#X text 329 141 kurzer Envelope;
#X text 737 326 Die Feedback-Menge (zw. -0.999 und 0.999) bestimmt \, wie lange die "Saite" nachklingt;
#X text 23 214 Charakteristisch für die Karplus-Strong-Synthese sind kurze "Noise-Bursts" als Input. Dieser soll das Anzupfen der Saite imitieren.;
#X text 305 176 längerer Envelope;
#N canvas 45 83 566 577 fft 0;
#X obj 19 61 inlet~;
#X obj 95 214 inlet;
#X obj 29 92 rfft~;
#X obj 29 125 *~;
#X obj 60 125 *~;
#X obj 29 155 sqrt~;
#X obj 332 109 block~ 4096 1;
#X obj 29 181 biquad~ 0 0 0 0 1;
#X text 93 93 Fourier series;
#X text 98 146 magnitude;
#X text 96 131 calculate;
#X text 21 3 This subpatch computes the spectrum of the incoming signal with a (rectangular windowed) FFT. FFTs aren't properly introduced until much later.;
#X text 83 61 signal to analyze;
#X text 192 166 delay two samples;
#X text 191 182 for better graphing;
#X obj 16 425 samplerate~;
#X obj 16 402 bng 18 250 50 0 empty empty empty 0 -6 0 8 #fcfcfc #000000 #000000;
#X floatatom 16 472 5 0 0 0 - - - 0;
#X obj 16 448 / 256;
#X obj 16 378 loadbang;
#X floatatom 16 541 5 0 0 0 - - - 0;
#X obj 24 494 s fundamental;
#X obj 16 517 ftom;
#X text 14 319 At load time \, calculate a good choice of fundamental frequency for showing spectra: the 16th bin in a 4096-point spectrum \, so SR*16/4096 or SR/256.;
#X text 145 216 "bang" into this inlet to graph it;
#X floatatom 191 480 5 0 0 0 - - - 0;
#X obj 191 456 / 4096;
#X text 187 425 One bin is SR/4096:;
#X text 72 540 <-just out of curiosity \, here's the fundamental pitch;
#X obj 191 502 s freq-step;
#X obj 95 248 tabwrite~ \$0-sidebands;
#X obj 20 281 tabwrite~ \$0-sidebands;
#X connect 0 0 2 0;
#X connect 0 0 31 0;
#X connect 1 0 30 0;
#X connect 1 0 31 0;
#X connect 2 0 3 0;
#X connect 2 0 3 1;
#X connect 2 1 4 0;
#X connect 2 1 4 1;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 7 0 30 0;
#X connect 15 0 18 0;
#X connect 15 0 26 0;
#X connect 16 0 15 0;
#X connect 17 0 21 0;
#X connect 17 0 22 0;
#X connect 18 0 17 0;
#X connect 19 0 16 0;
#X connect 22 0 20 0;
#X connect 25 0 29 0;
#X connect 26 0 25 0;
#X restore 694 592 pd fft;
#X text 758 543 graph frequencies;
#X obj 733 566 metro 20;
#X obj 733 545 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-sidebands 200 float 0;
#X coords 0 100 199 -40 200 130 1 0 0;
#X restore 1036 671 graph;
#X text 865 283 Unterschied zwischen positivem und negativem (inharm.) Feedback beachten!;
#X msg 54 646 \; lop 10000 \; randomnote 1 \; feedback 90 \; metro 500;
#X obj 50 594 loadbang;
#X obj 568 251 r note;
#X text 176 616 slap bass;
#X text 306 620 drone;
#X msg 306 645 \; lop 5000 \; randomnote 0 \; note 24 \; feedback -99.9 \; metro 50;
#X text 391 13 START;
#X text 333 494 MASTER;
#X text 756 413 Lowpass: höhere Frequenzanteile werden gedämpft -> aliasing / störfrequenzen werden abgeschwächt;
#X text 450 623 pluck;
#X msg 450 648 \; lop 5000 \; randomnote 0 \; note 60 \; feedback 99.9 \; metro 150;
#X msg 177 645 \; lop 1000 \; randomnote 1 \; feedback 99.9 \; metro 250;
#X obj 632 84 random 2400;
#X obj 632 108 / 100;
#X msg 403 519 \$1 10;
#X msg 441 175 0 \, 0.5 500 \, 0 750 500;
#X msg 462 141 0 \, 1 5 \, 0 1 5;
#X obj 436 409 *~ 0.5;
#X obj 632 143 + 24;
#X connect 0 0 24 0;
#X connect 1 0 14 0;
#X connect 2 0 24 1;
#X connect 3 0 14 1;
#X connect 4 0 17 1;
#X connect 5 0 17 2;
#X connect 6 0 17 3;
#X connect 7 0 5 0;
#X connect 8 0 7 0;
#X connect 10 0 11 0;
#X connect 11 0 25 0;
#X connect 12 0 4 0;
#X connect 13 0 12 1;
#X connect 14 0 16 0;
#X connect 16 0 54 0;
#X connect 16 0 53 0;
#X connect 16 1 50 0;
#X connect 17 0 20 0;
#X connect 17 0 25 0;
#X connect 17 0 32 0;
#X connect 20 0 23 1;
#X connect 20 0 23 0;
#X connect 21 0 52 0;
#X connect 22 0 20 1;
#X connect 24 0 55 0;
#X connect 34 0 32 1;
#X connect 35 0 34 0;
#X connect 39 0 38 0;
#X connect 40 0 4 0;
#X connect 50 0 51 0;
#X connect 51 0 56 0;
#X connect 52 0 22 0;
#X connect 54 0 2 0;
#X connect 55 0 17 0;
#X connect 56 0 12 0;
